/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

package com.egain.sdk;

import com.egain.sdk.utils.HTTPClient;
import com.egain.sdk.utils.Headers;
import com.egain.sdk.utils.RetryConfig;
import com.egain.sdk.utils.SpeakeasyHTTPClient;
import com.egain.sdk.utils.Utils;
import java.lang.String;
import java.util.Map;
import java.util.Optional;
import java.util.function.Consumer;

/**
 * Knowledge Portal Manager APIs: ### License
 * The following licenses are required to use the Knowledge Access APIs:
 * * If the user is an agent, then the *Knowledge + AI* license is required.
 * * If the user is a customer, the *Self-Service* and *Advanced Self-Service* licenses must be
 * available.
 * 
 * <p>### Tiers
 * 
 * <p>| Tier	|Tier Name|	Named Users |	Description
 * | ---------- | ---------- | ---------- | ----------------------------
 * | Tier 1 |  Starter |	Up to 10|	Designed for small-scale implementations or pilot environments
 * | Tier 2 |	Growth	| Up to 1000|	Suitable for mid-scale deployments requiring moderate scalability
 * | Tier 3 |	Enterprise	| Greater than 1000|	Supports large-scale environments with extended
 * configuration options
 * 
 * <p>### API Resource Limits
 * The following Resources have predefined limits for specific access attributes for Starter, Growth
 * and Enterprise use.
 * 
 * <p>| Resource | Limits | Starter | Growth | Enterprise
 * | ---------------- | ---------------------------- | ---------- | ---------- | ----------
 * | Article Reference |Number of attachments used in any article | 25 | 50 |50
 * |  |Number of custom attributes in an article | 10 | 25| 50
 * |  |Number of publish views used in an article version | 20 | 20 | 20
 * | Topic Reference |User-defined topics in a department| 1000| 5000 | 50000
 * |  |Depth of topics  | 5 | 20 | 20
 * |  |Topics at any level | 500 | 2500 | 2500
 * |  |Number of custom attributes in a topic | 10 | 10 | 10
 * | Portal Reference | Tag categories in a portal | 15 | 15 | 15
 * |  |Topics to be included in a portal | 100 | 500 | 5000
 * |  |Number of articles to display in announcements | 10 | 25 | 25
 * |  |Usage links and link groups setup for a portal | 5 | 10 | 25
 */
public class Egain {
    private static final Headers _headers = Headers.EMPTY;


    /**
     * SERVERS contains the list of server urls available to the SDK.
     */
    public static final String[] SERVERS = {
        /*
         * Production Server
         */
        "https://api.aidev.egain.cloud/knowledge/portalmgr/v4",
    };


    private final Aiservices aiservices;


    private final Content content;


    private final Portal portal;


    public Aiservices aiservices() {
        return aiservices;
    }


    public Content content() {
        return content;
    }


    public Portal portal() {
        return portal;
    }
    private final AsyncEgain asyncSDK;

    /**
     * The Builder class allows the configuration of a new instance of the SDK.
     */
    public static class Builder {

        private final SDKConfiguration sdkConfiguration = new SDKConfiguration();
        private String serverUrl;
        private String server;
        

        private Builder() {
        }

        /**
         * Allows the default HTTP client to be overridden with a custom implementation.
         *
         * @param client The HTTP client to use for all requests.
         * @return The builder instance.
         */
        public Builder client(HTTPClient client) {
            this.sdkConfiguration.setClient(client);
            return this;
        }
        /**
         * Configures the SDK security to use the provided secret.
         *
         * @param accessToken The secret to use for all requests.
         * @return The builder instance.
         */
        public Builder accessToken(String accessToken) {
            this.sdkConfiguration.setSecuritySource(SecuritySource.of(com.egain.sdk.models.components.Security.builder()
              .accessToken(accessToken)
              .build()));
            return this;
        }

        /**
         * Configures the SDK to use a custom security source.
         *
         * @param securitySource The security source to use for all requests.
         * @return The builder instance.
         */
        public Builder securitySource(SecuritySource securitySource) {
            Utils.checkNotNull(securitySource, "securitySource");
            this.sdkConfiguration.setSecuritySource(securitySource);
            return this;
        }
        
        /**
         * Overrides the default server URL.
         *
         * @param serverUrl The server URL to use for all requests.
         * @return The builder instance.
         */
        public Builder serverURL(String serverUrl) {
            this.serverUrl = serverUrl;
            return this;
        }

        /**
         * Overrides the default server URL with a templated URL populated with the provided parameters.
         *
         * @param serverUrl The server URL to use for all requests.
         * @param params The parameters to use when templating the URL.
         * @return The builder instance.
         */
        public Builder serverURL(String serverUrl, Map<String, String> params) {
            this.serverUrl = Utils.templateUrl(serverUrl, params);
            return this;
        }
        
        /**
         * Overrides the default server by index.
         *
         * @param serverIdx The server to use for all requests.
         * @return The builder instance.
         */
        public Builder serverIndex(int serverIdx) {
            this.sdkConfiguration.setServerIdx(serverIdx);
            this.serverUrl= SERVERS[serverIdx];
            return this;
        }
        
        /**
         * Overrides the default configuration for retries
         *
         * @param retryConfig The retry configuration to use for all requests.
         * @return The builder instance.
         */
        public Builder retryConfig(RetryConfig retryConfig) {
            this.sdkConfiguration.setRetryConfig(Optional.of(retryConfig));
            return this;
        }

        /**
         * Enables debug logging for HTTP requests and responses, including JSON body content.
         * <p>
         * Convenience method that calls {@link HTTPClient#enableDebugLogging(boolean)}.
         * {@link SpeakeasyHTTPClient} honors this setting. If you are using a custom HTTP client,
         * it is up to the custom client to honor this setting.
         * </p>
         *
         * @param enabled Whether to enable debug logging.
         * @return The builder instance.
         */
        public Builder enableHTTPDebugLogging(boolean enabled) {
            this.sdkConfiguration.client().enableDebugLogging(enabled);
            return this;
        }

        // Visible for testing, may be accessed via reflection in tests
        Builder _hooks(com.egain.sdk.utils.Hooks hooks) {
            sdkConfiguration.setHooks(hooks);  
            return this;  
        }
        
        // Visible for testing, may be accessed via reflection in tests
        Builder _hooks(Consumer<? super com.egain.sdk.utils.Hooks> consumer) {
            consumer.accept(sdkConfiguration.hooks());
            return this;    
        }

        /**
         * Builds a new instance of the SDK.
         *
         * @return The SDK instance.
         */
        public Egain build() {
            if (serverUrl == null || serverUrl.isBlank()) {
                serverUrl = SERVERS[0];
                sdkConfiguration.setServerIdx(0);
            }
            sdkConfiguration.setServerUrl(serverUrl);
            return new Egain(sdkConfiguration);
        }
    }

    /**
     * Get a new instance of the SDK builder to configure a new instance of the SDK.
     *
     * @return The SDK builder instance.
     */
    public static Builder builder() {
        return new Builder();
    }

    public Egain(SDKConfiguration sdkConfiguration) {
        sdkConfiguration.initialize();
        this.aiservices = new Aiservices(sdkConfiguration);
        this.content = new Content(sdkConfiguration);
        this.portal = new Portal(sdkConfiguration);
        sdkConfiguration = sdkConfiguration.hooks().sdkInit(sdkConfiguration);
        this.asyncSDK = new AsyncEgain(this, sdkConfiguration);
    }

    /**
     * Switches to the async SDK.
     * 
     * @return The async SDK
     */
    public AsyncEgain async() {
        return asyncSDK;
    }

}
