/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package com.egain.sdk;

import static com.egain.sdk.operations.Operations.AsyncRequestOperation;

import com.egain.sdk.models.components.AcceptLanguage;
import com.egain.sdk.models.components.AttachmentUpload;
import com.egain.sdk.models.operations.CreateSignedURLRequest;
import com.egain.sdk.models.operations.UploadAttachmentRequest;
import com.egain.sdk.models.operations.async.CreateSignedURLRequestBuilder;
import com.egain.sdk.models.operations.async.CreateSignedURLResponse;
import com.egain.sdk.models.operations.async.UploadAttachmentRequestBuilder;
import com.egain.sdk.models.operations.async.UploadAttachmentResponse;
import com.egain.sdk.operations.CreateSignedURL;
import com.egain.sdk.operations.UploadAttachment;
import com.egain.sdk.utils.Blob;
import com.egain.sdk.utils.Headers;
import jakarta.annotation.Nonnull;
import java.lang.String;
import java.util.concurrent.CompletableFuture;


public class AsyncAttachment {
    private static final Headers _headers = Headers.EMPTY;
    private final SDKConfiguration sdkConfiguration;
    private final Attachment syncSDK;

    AsyncAttachment(Attachment syncSDK, SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.syncSDK = syncSDK;
    }

    /**
     * Switches to the sync SDK.
     * 
     * @return The sync SDK
     */
    public Attachment sync() {
        return syncSDK;
    }


    /**
     * Generate Signed URL to Upload API
     * 
     * <p>## Overview
     * The Generate Signed URL to Upload API produces a signature that is used to upload an attachment.
     * 
     * @return The async call builder
     */
    public CreateSignedURLRequestBuilder createSignedURL() {
        return new CreateSignedURLRequestBuilder(sdkConfiguration);
    }

    /**
     * Generate Signed URL to Upload API
     * 
     * <p>## Overview
     * The Generate Signed URL to Upload API produces a signature that is used to upload an attachment.
     * 
     * @param acceptLanguage 
     * @param body 
     * @return {@code CompletableFuture<CreateSignedURLResponse>} - The async response
     */
    public CompletableFuture<CreateSignedURLResponse> createSignedURL(@Nonnull AcceptLanguage acceptLanguage, @Nonnull AttachmentUpload body) {
        CreateSignedURLRequest request = new CreateSignedURLRequest(acceptLanguage, body);
        AsyncRequestOperation<CreateSignedURLRequest, CreateSignedURLResponse> operation
              = new CreateSignedURL.Async(sdkConfiguration, _headers);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }


    /**
     * Upload Attachment
     * 
     * <p>## Overview
     * The Upload Attachment API uses the signed URL produced by the Generate Signed URL to Upload API to
     * upload an attachment.
     * The Make a Suggestion API uses this API to upload attachments.
     * 
     * @return The async call builder
     */
    public UploadAttachmentRequestBuilder uploadAttachment() {
        return new UploadAttachmentRequestBuilder(sdkConfiguration);
    }

    /**
     * Upload Attachment
     * 
     * <p>## Overview
     * The Upload Attachment API uses the signed URL produced by the Generate Signed URL to Upload API to
     * upload an attachment.
     * The Make a Suggestion API uses this API to upload attachments.
     * 
     * @param acceptLanguage 
     * @param signature Signature data to upload attachment.
     * @param body 
     * @return {@code CompletableFuture<UploadAttachmentResponse>} - The async response
     */
    public CompletableFuture<UploadAttachmentResponse> uploadAttachment(
            @Nonnull AcceptLanguage acceptLanguage, @Nonnull String signature,
            @Nonnull Blob body) {
        UploadAttachmentRequest request = new UploadAttachmentRequest(acceptLanguage, signature, body);
        AsyncRequestOperation<UploadAttachmentRequest, UploadAttachmentResponse> operation
              = new UploadAttachment.Async(sdkConfiguration, _headers);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }

}
